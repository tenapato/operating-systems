{"changed":true,"filter":false,"title":"Lab7.c","tooltip":"/Lab7.c","value":"// Patricio Tena A01027293\n//Francisco Acu√±a A01027294\n\n// Lab 7\n\n#include <stdio.h>\n#include <stdlib.h>\n#include <time.h>\nint count=0;\ntypedef struct Processes{\n\tint id;\n\tint remainingTime;\n\tstruct Processes *next;\n} Process;\n\nProcess *front;\n\nProcess *createProcess(int id, int remainingTime){\n\tProcess *toAdd=(Process *)malloc(sizeof(Process));\n\ttoAdd->id=id;\n\ttoAdd->remainingTime=remainingTime;\n\ttoAdd->next=NULL;\n\treturn toAdd;\n}\nvoid enqueue(Process *toAdd){ //recive un apuntador a un proceso\n\tif(front==NULL){\n\t\tfront=toAdd;\n\t}else{\n\t\tProcess *temp=front;\n\t\twhile(temp->next!=NULL){\n\t\t\ttemp=temp->next;\n\t\t}\n\t\ttemp->next=toAdd;\n\t}\n\tcount++;\n}\n\nProcess *dequeue(){ //quita el frente de la cola y te da el apuntador a donde esta ese proceso\n\tProcess *toReturn=front;\n\tfront=front->next;\n\tcount--;\n\ttoReturn->next=NULL;\n\treturn toReturn;\n}\n\nvoid printQueue(){  // te dice que hay en la cola\n\tProcess *temp=front;\n\tprintf(\"Total:%d;\", count);\n\twhile(temp!=NULL){\n\t\t\tprintf(\"id:%d,rT:%d;\",temp->id, temp->remainingTime);\n\t\t\ttemp=temp->next;\n\t}\n\tprintf(\"\\n\");\n}\n\nint main(){\n    int quantum = 5;\n    \n    //p->remaningTime-quantum en un for\n    //p->remaningTime--//generar random entre 0-100 y si es<10, preemtion por I/O\n    /*\n\tprintQueue();\n\tenqueue(createProcess(1, 10));\n\tProcess *p1=createProcess(2, 20);\n\tenqueue(p1);\n\tprintQueue();\n\tProcess *p=dequeue();\n\tprintf(\"Sacado %d con tiempo %d\\n\", p->id, p->remainingTime);\n\tp=dequeue();\n\tprintf(\"Sacado %d con tiempo %d\\n\", p->id, p->remainingTime);\n\tprintQueue();*/\n\t\n\tProcess *p1=createProcess(1, 20);\n\tenqueue(p1);\n\tprintf(\"Adding process %d with running time: %d\\n\", p1->id, p1->remainingTime);\n\tProcess *p2=createProcess(2, 7);\n\tenqueue(p2);\n\tprintf(\"Adding process %d with running time: %d\\n\", p2->id, p2->remainingTime);\n\tProcess *p3=createProcess(3, 15);\n\tenqueue(p3);\n\tprintf(\"Adding process %d with running time: %d\\n\", p3->id, p3->remainingTime);\n\tProcess *p4=createProcess(4, 10);\n\tenqueue(p4);\n\tprintf(\"Adding process %d with running time: %d\\n\", p4->id, p4->remainingTime);\n\tProcess *p5=createProcess(5, 12);\n\tenqueue(p5);\n\tprintf(\"Adding process %d with running time: %d\\n\", p5->id, p5->remainingTime);\n\t\n\tsrand(time(NULL));  \n\twhile (count != 0){\n\t\t \n\t\tint r;\n\t   \n\t   Process *running = dequeue(); \n\t   //p[count]=dequeue();\n\t   //printQueue();\n\t   printf(\"Running process %d\\n\", running->id);\n\t   for(int i = 0;i < quantum;i++){\n\t   \t\tr = rand()%100+1;\n\t    \t\n\t    \t\n\t    //\tprintf(\"Random number: %d\\n\", r);\n\t    \t//Crear I/O blocking\n\t    \tif(r<=10){\n\t    \t\t//dequeue();\n\t    \t\tenqueue(running);\n\t    \t\tprintf(\"Process %d blocked for I/O and was preempted with remaning time %d\\n\", running->id, running->remainingTime);\n\t    \t\t//dequeue();\n\t    \t\t//running = dequeue();\n\t    \t\tbreak;\n\t    \t\n\t    \t} \n\t    \t\n\t    \trunning->remainingTime--;\n\t       \n\t    \tif(running->remainingTime <=0){\n\t       \tprintf(\"Process %d finished execution\\n\", running->id);\n\t       \tbreak;\n\t       }\n\t      \n\t       \n\t   }//end of for\n\t\tif(running->remainingTime>0 && r > 10){\n\t\t\t//enqueue(running);\n\t\t\tprintf(\"Process %d with time slice %d was preempted with remaining time: %d\\n\", running->id,quantum, running->remainingTime);\n\t\t\t//running = dequeue();\n\t\t\n\t\t}\n\t    \n\t   // printQueue();\n\t    \n\t    \n\t    \n\t    \n\t    \n\t}//end of while \n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\treturn 0;\n}","undoManager":{"mark":0,"position":-1,"stack":[[{"start":{"row":45,"column":49},"end":{"row":45,"column":54},"action":"insert","lines":["user2"],"id":1035}]]},"ace":{"folds":[],"scrolltop":1165,"scrollleft":0,"selection":{"start":{"row":103,"column":6},"end":{"row":110,"column":6},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":35,"state":"start","mode":"ace/mode/c_cpp"}},"timestamp":1602814774582}