{"filter":false,"title":"atomicExample.c","tooltip":"/atomicExample.c","undoManager":{"mark":10,"position":10,"stack":[[{"start":{"row":0,"column":0},"end":{"row":50,"column":1},"action":"insert","lines":["#include <stdio.h>","#include <pthread.h>","#define PROD 0","#define CONS 1","#define BUFFERSIZE 5","int buffer[BUFFERSIZE];","int count=0;","int in=0, out=0;","int turn=0;","int ready[2]={0,0};","","void *producer(void *arg){","    int i=0;","    while(i<100){","        while(count==BUFFERSIZE);//wait while the buffer is full","        turn=CONS;//give the turn to blue","        ready[PROD]=1;//set green to ready","        while(ready[CONS]&&turn==CONS);//while blue is in the CS","        buffer[in]=i;","        count++;","        ready[PROD]=0;//green is not ready","        in=(in +1)%BUFFERSIZE;","      ","        i++;","    }","}","","void *consumer(void *arg){","    int i=0;","    while(i<100){","        while(count==0);//wait while the buffer is empty","        turn=PROD;//green's turn","        ready[CONS]=1;","        while(ready[PROD]&& turn==PROD);","        int num=buffer[out];","        count--;","        ready[CONS]=0;","        out=(out+1)%BUFFERSIZE;","        ","        i++;","        printf(\"%d\\n\", num);","    }","}","","int main(){","    pthread_t p,c;","    pthread_create(&c, NULL, consumer, NULL);","    pthread_create(&p, NULL, producer, NULL);","    pthread_join(c, NULL);","    pthread_join(p,NULL);","}"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":50,"column":1},"action":"remove","lines":["#include <stdio.h>","#include <pthread.h>","#define PROD 0","#define CONS 1","#define BUFFERSIZE 5","int buffer[BUFFERSIZE];","int count=0;","int in=0, out=0;","int turn=0;","int ready[2]={0,0};","","void *producer(void *arg){","    int i=0;","    while(i<100){","        while(count==BUFFERSIZE);//wait while the buffer is full","        turn=CONS;//give the turn to blue","        ready[PROD]=1;//set green to ready","        while(ready[CONS]&&turn==CONS);//while blue is in the CS","        buffer[in]=i;","        count++;","        ready[PROD]=0;//green is not ready","        in=(in +1)%BUFFERSIZE;","      ","        i++;","    }","}","","void *consumer(void *arg){","    int i=0;","    while(i<100){","        while(count==0);//wait while the buffer is empty","        turn=PROD;//green's turn","        ready[CONS]=1;","        while(ready[PROD]&& turn==PROD);","        int num=buffer[out];","        count--;","        ready[CONS]=0;","        out=(out+1)%BUFFERSIZE;","        ","        i++;","        printf(\"%d\\n\", num);","    }","}","","int main(){","    pthread_t p,c;","    pthread_create(&c, NULL, consumer, NULL);","    pthread_create(&p, NULL, producer, NULL);","    pthread_join(c, NULL);","    pthread_join(p,NULL);","}"],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":37,"column":1},"action":"insert","lines":["#include <stdio.h>","#include <pthread.h>","","#define BUFFERSIZE 5","int buffer[BUFFERSIZE];","int count=0;","int in=0, out=0;","","void *producer(void *arg){","    int i=0;","    while(i<100){","        while(count==BUFFERSIZE);//wait while the buffer is full","        buffer[in]=i;","        in=(in +1)%BUFFERSIZE;","        count++;","        i++;","    }","}","","void *consumer(void *arg){","    int i=0;","    while(i<100){","        while(count==0);//wait while the buffer is empty","        int num=buffer[out];","        out=(out+1)%BUFFERSIZE;","        count--;","        i++;","        printf(\"%d\\n\", num);","    }","}","","int main(){","    pthread_t p,c;","    pthread_create(&c, NULL, consumer, NULL);","    pthread_create(&p, NULL, producer, NULL);","    pthread_join(c, NULL);","    pthread_join(p,NULL);","}"],"id":3}],[{"start":{"row":4,"column":0},"end":{"row":4,"column":1},"action":"insert","lines":["_"],"id":4},{"start":{"row":4,"column":1},"end":{"row":4,"column":2},"action":"insert","lines":["A"]},{"start":{"row":4,"column":2},"end":{"row":4,"column":3},"action":"insert","lines":["t"]},{"start":{"row":4,"column":3},"end":{"row":4,"column":4},"action":"insert","lines":["o"]},{"start":{"row":4,"column":4},"end":{"row":4,"column":5},"action":"insert","lines":["m"]},{"start":{"row":4,"column":5},"end":{"row":4,"column":6},"action":"insert","lines":["c"]}],[{"start":{"row":4,"column":5},"end":{"row":4,"column":6},"action":"remove","lines":["c"],"id":5}],[{"start":{"row":4,"column":5},"end":{"row":4,"column":6},"action":"insert","lines":["i"],"id":6},{"start":{"row":4,"column":6},"end":{"row":4,"column":7},"action":"insert","lines":["c"]}],[{"start":{"row":4,"column":7},"end":{"row":4,"column":8},"action":"insert","lines":[" "],"id":7}],[{"start":{"row":5,"column":0},"end":{"row":5,"column":1},"action":"insert","lines":["_"],"id":8},{"start":{"row":5,"column":1},"end":{"row":5,"column":2},"action":"insert","lines":["A"]},{"start":{"row":5,"column":2},"end":{"row":5,"column":3},"action":"insert","lines":["t"]},{"start":{"row":5,"column":3},"end":{"row":5,"column":4},"action":"insert","lines":["o"]},{"start":{"row":5,"column":4},"end":{"row":5,"column":5},"action":"insert","lines":["i"]}],[{"start":{"row":5,"column":4},"end":{"row":5,"column":5},"action":"remove","lines":["i"],"id":9}],[{"start":{"row":5,"column":4},"end":{"row":5,"column":5},"action":"insert","lines":["m"],"id":10},{"start":{"row":5,"column":5},"end":{"row":5,"column":6},"action":"insert","lines":["i"]},{"start":{"row":5,"column":6},"end":{"row":5,"column":7},"action":"insert","lines":["c"]}],[{"start":{"row":5,"column":7},"end":{"row":5,"column":8},"action":"insert","lines":[" "],"id":11}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":0},"end":{"row":7,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":14,"state":"start","mode":"ace/mode/c_cpp"}},"timestamp":1604438527426,"hash":"c66d59fba46e6c8ccf272cbb11ddc9727a82eda0"}